
## External Tape Sorter

Внешняя сортировка с использованием абстракции "лент" — симуляция ограниченного доступа к памяти и последовательного чтения/записи. Полезна для ситуаций, когда объём данных не помещается в ОЗУ.

---

### Функциональность

* Сортировка больших массивов целых чисел (int32\_t) с заданным лимитом на память.
* Используется двухфазная внешняя сортировка:

  1. Разбиение на отсортированные чанки.
  2. Многопутевое слияние.
* Абстракция `ITape` симулирует поведение магнитной ленты:

  * `read()`, `write()`, `moveLeft()`, `moveRight()`, `rewind()`, `isEOF()`.

---

### Структура проекта

```bash
.
├── external/
│   └── googletests    # Сабмодуль Google Tests 
CMakeLists.txt
ITape.hpp              # Интерфейс
FileTape.hpp            
FileTape.cpp
ExternalTapeSorter.hpp
ExternalTapeSorter.cpp
main.cpp
├── tests/
│   ├── tests_tape.cpp  # Тесты (Google Tests подключены сабмодулем)
│   └── tests_sort.cpp
├── tmp/                # Временные файлы чанков (создаются/удаляются автоматически)
├── build/              # Каталог для сборки CMake
│   └── tests           
manual_test.sh          # Скрипт ручного тестирования (создает 1000 рандомных чисел в бинарнике)
```

---

1. **Сборка:**

```bash
mkdir build && cd build
cmake ..
make
```

2. **Запуск генерации, сортировки и проверки (вручную в КОРНЕВОЙ ПАПКЕ):**

```bash
# Сгенерировать входной файл
./GenerateInput ../tmp/input.bin 1000

# Отсортировать
./TapeSorted ../tmp/input.bin ../tmp/output.bin

# Проверить
./CheckSorted ../tmp/output.bin

# Скриптом
./manual_test.sh
```
Не забываем (если нет прав):

```bash
chmod +x manual_test.sh
```

3. **Запуск тестов:**

```bash
./build/tests/
./TapeTests
```

### Тесты

* Чтение/запись на ленте
* Перемещение ленты
* Сортировка с повторами, единичным числом, пустыми файлами
* Тесты на корректность выхода и стабильность

---

Айтимов Акежан (НИУ ВШЭ, ФКН) 2025
